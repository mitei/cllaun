print("--- Config: default.cllaun_conf");

// Skin-api test
skin.read("test_skin");

// Global-Shortcut-api test
shortcut['Ctrl+Alt+Space'] = window.show;

// (Widget-)Shortcut-api test
commandLine.shortcut['Ctrl+G'] = function() {
    commandLine.text = "Ctrl+G";
    commandLine.selectAll();
};
commandLine.shortcut['Tab'] = function() {
    listView.setFocus();
    listView.index = 0;
};
listView.shortcut['Tab'] = function() {
    listView.index++;
};
listView.shortcut['Shift+Tab'] = function() {
    listView.index--;
};
listView.activated.connect(listView, function(i) {
    var cmd = Parser.parse(commandLine.text);
    var subcmd = Parser.parse(commandLine.text.substr(0, commandLine.cursorPosition));
    var newcmd = [cmd.name].concat(cmd.args);
    print(newcmd);
    print(this.data[i]);
    newcmd[subcmd.args.length] = this.data[i];
    commandLine.text = newcmd.join(' ');
    commandLine.setFocus();
    listView.hide();
});
listView.shortcut['Esc'] = function() {
    commandLine.setFocus();
    listView.hide();
};

// Plugin-command test
Launcher.commands['exit'] = function() {
    exit();
};
Launcher.commands['eval'] = function(script_str) {
    eval(script_str);
};

// Alias-api test
Launcher.aliases['quit'] = ':exit';

// signal-slot test
commandLine.returnPressed.connect(commandLine, function() {
    this.selectAll();
    window.hide();
    var cmd = Parser.parse(this.text);
    Launcher.run(cmd);
});
commandLine.textChanged.connect(commandLine, function() {
    var cmd = Parser.parse(this.text.substr(0, this.cursorPosition));
    var candidates;
    if (cmd.args.length > 0) {
        candidates = Launcher.list(cmd.args[cmd.args.length - 1]);
    } else {
        candidates = Launcher.list(cmd.name);
    }

    listView.data = candidates;
    if (candidates.length == 0) {
        listView.hide();
    } else {
        listView.show();
        print('onCursorPositionChanged: ' + candidates.toString());
    }
});

window.resize(1000, 1000);
window.move(300, 300);
window.show();
listView.move(16, 52);
listView.hide();

// Plugin-api test
plugin.importAll();

print("--- /Config: default.cllaun_conf");
